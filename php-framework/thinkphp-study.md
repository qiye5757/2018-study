## ThinkPHP5.0.10源码阅读

### 启动流程 

1. 进入public/index.php
2. 定义常量，为运行路径、开发路径、类库路径等等
3. 注册自动加载，注册系统自带的和composer自带的
4. 注册系统自定义的错误与异常类
5. 加载默认配置文件
6. 应用启动
	+ 加载配置文件
	+ 加载过滤信息
	+ 配置调试模式
	+ 设置时区
	+ 监听 `app_init` 钩子
	+ 开启多语言
	+ 监听 `app_dispatch` 钩子
	+ 加载调度信息
	+ 无则解析URL组建调度信息
	+ 记录调度信息
	+ 记录访问日志
	+ 监听 `app_begin` 钩子
	+ 将请求缓存
	+ **根据调度信息和配置信息执行应用**
	+ 调度为 `model` 模式下，是默认流程
	+ 检测是否支持多模块，如果支持则初始化模块，即第一步
	+ 加载过滤信息
	+ 设置当前请求的控制器、操作
	+ 监听 `module_init` 钩子
	+ 实例化控制器
	+ 监听 `action_begin` 钩子
	+ 调用反射执行类的方法
	+ 清除类的实例化
	+ 根据配置信息创建response对象
	+ 监听 `app_end` 钩子
	+ 监听 `response_send` 钩子
	+ 构建response发送到客户端
	+ 监听 `response_end` 钩子

### 注册自动加载

##### 注册的系统自动加载的类

1. 检测是否定义了类的命名空间别名，有则加载
2. 查找文件，能找到则将类包含进来

	+ 首先检测类库映射中是否存在
	+ 检测psr-4是否能加载到该文件
	+ 检测psr-0是否能加载到该文件
	+ 都无则定义该类的类库映射为false

##### 注册的composer的自动加载的类