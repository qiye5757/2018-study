## PHP手册阅读（三）之数据类型

1. [简介](#introduction)
2. [boolean类型](#boolean)
3. [integer整型](#int)
4. [float类型](#float)

### <span id = "introduction">简介</span>

1. PHP有9种数据类型 
2. 标量：`integer`、 `boolean` 、`string`、 `float`
3. 复合：`array` 、`object` 、`callable`
4. 资源：`resource`、 `NULL`

5. 为了在手册中阅读，新增了 `mixed`、 `callback`、 `number`、 `array|object`、 `void`、 `$...`
6. var_dump()：打印变量的相关信息
7. gettype()：获取一个变量的数据类型（返回值除了callable的其他），判断某个变量的类型请用下面的这个is
8. settype()：设置一个变量为某种类型（除了callable和resource都可以）
9. is_int()：判断一个变量是否为某一种类型（九种都可以）

### <span id = "boolean">boolean布尔型</span>

1. 这是最简单的一种数据类型。值可以为 `true` 或 `false`，这两个值为常量，不区分大小写。

        $test = true;

2. 通常 **运算符** 所返回的 **boolean** 值结果会返回给控制流程
3. **强制转换**：可以使用 `(bool)` 或者 `(boolean)` 或者 `boolval()函数`来强制转换获取boolean值
4. **隐形转换**：当运算符、函数或者流程控制需要一个boolean参数时，会自动转换

5. 自动转换规则（以下都会转为false，其他值都为true）

	+ boolean类型本身
	+ 整型值：0
	+ 浮点型：0.0（零）
	+ 空字符串以及字符串	`'0'`
	+ 不包含任何元素的数组
	+ 特殊类型NULL（包括尚未赋值的变量）
	+ 从空标记生成的 `SimpleXML` 对象

### <span id="int">integer整型</span>

1. 整型类型可以用十进制、十六进制、八进制或者二进制（***二进制在PHP5.4版本开始可以使用***），前面可以加上可选的符号（`+` 或者 `-`）

	+ 使用八进制开头必须加 `0`
	+ 使用十六进制开头必须加 `0x`
	+ 使用二进制开头必须加 `0b`

2. 整型语法的结构形式为

	+ 十进制： [1-9][0-9]*|0
	+ 十六进制： 0(xX)[0-9a-fA-F]+
	+ 八进制： 0[0-7]+
	+ 二进制： 0b[01]+
	+ 整型: [+-]?十进制|[+-]?十六机制|	[+-]?八进制|	[+-]?二进制
3. 整型的字长是和平台相关的

	+ 在32位机器上，最大值通常为 `20亿`
	+ 在64位机器上，最大值为 `9E18`,除了在window上的PHP7总是32位的

4. **PHP不支持无符号的整型**
5. int整型相关的常量

	+ PHP\_INT\_SIZE：获取常量的字长。4为32位，8位64位
	+ PHP\_INT\_MAX：从5.0.5版本起，可以获取整型的最大值
	+ PHP\_INT\_MIX：从7.0.0版本起，可以获取整型的最小值

6. **在PHP7之前，如果使用8进制的整型的时候使用了 `8`或者`9`是被忽略的。从PHP7版本起，会报一个语法错误**
7. **如果给定了一个值超过了整型的范围会转为 `float类型`，同样的，如果运算结果超过了整型的范围也会转为 `float类型`**
8. PHP没有整除的运算符，如果想实现整除效果，可以强制转换(结果为整型)或者使用 `round()`等函数进行运算（结果为float类型）
9. **强制转换：**可以使用 `(int)` 或者 `(integer)` 或者 `intval()函数`等方法进行转换
10. **隐形转换：**当运算符、函数或者流程控制需要一个int参数时，会自动转换		
11. 转换规则
	+ resource类型：结果会是PHP运行时为该资源分配的唯一资源号
	+ boolean类型：FALSE返回0，TRUE返回1
	+ float类型：向下取整，**如果超出了整型范围，结果为未定义，而且没有任何通知或者报错**
	+ ***自PHP7起，NaN和Infinity在转换位integer类型时，不再是未定义或者依赖于平台，都为0***	
	+ ***不要将未知的分数强制转为为integer类型，有时候会导致不可预知的错误*	**
	+ string类型：[字符串转换为数值](#string-to-int)
	+ NULL类型：0
	+ 其他类型：不可以转换

### <span id="float">float 浮点数</span>

 浮点数可以用以下任何一种方法表示
	
	$a = 3.1415926;
	$b = 2.2e13
	$c = 1.2E-10

+ 浮点数的字长和平台有关，尽管通常最大值是 1.8e308 并具有 14 位十进制数字的精度（64 位 IEEE 格式）。
+ PHP通常使用IEEE 754双精度格式，则由于取整而导致的最大相对误差为 1.11e-16。非基本数学运算可能会给出更大误差，并且要考虑到进行复合运算时的误差传递。注意事项:
	+ 永远不要相信浮点数结果精确到最后一位
	+ 永远不要比较两个浮点数是否一致

+ 转换浮点数
	+ string类型：字符串装换为数值
	+ 其他类型：先转换为整型在转换为浮点
	+ PHP5以上：将对象转换为浮点数，会发出一条E_NOTICE错误

+ 两个浮点数进行比较
 
 虽然浮点数由于精度的问题，比较起来有问题。但是总有迂回的方式，即**使用一个仅比该数值大一丁点的最小误差值，该值也被称为最小误差值，是计算中所能接受的最小误差值**

+ `NAN`

 某些数学运算会产生一个有常量 `NAN` 所代表的结果。此结果代表着一个在浮点数中未定义或者不可描述的值，**任何拿此值和其他任何值（除了TRUE）去比较都是true**。  
 由于 `NAN` 代表着任何不同值，不应该拿 `NAN` 和其他任何值去比较，包括其自身，应该使用 `is_nan()` 来判断

### <span id="string">string 字符串</span>

#### 什么是字符串？
 一个字符串 string 就是由一系列的字符组成，其中每个字符等同于一个字节。这意味着 PHP 只能支持 256 的字符集，因此不支持 Unicode 。 `string 最大可以达到 2GB`

#### 语法

1. 单字符

	+ 只能解析 `\\` 和 `\'` 这两个字符

2. 双引号

	+ **对一些特殊字符进行解析**

			\n	换行（ASCII 字符集中的 LF 或 0x0A (10)）
			\r	回车（ASCII 字符集中的 CR 或 0x0D (13)）
			\t	水平制表符（ASCII 字符集中的 HT 或 0x09 (9)）
			\v	垂直制表符（ASCII 字符集中的 VT 或 0x0B (11)）（自 PHP 5.2.5 起）
			\e	Escape（ASCII 字符集中的 ESC 或 0x1B (27)）（自 PHP 5.4.0 起）
			\f	换页（ASCII 字符集中的 FF 或 0x0C (12)）（自 PHP 5.2.5 起）
			\\	反斜线
			\$	美元标记
			\"	双引号
			\[0-7]{1,3}	符合该正则表达式序列的是一个以八进制方式来表达的字符
			\x[0-9A-Fa-f]{1,2}	符合该正则表达式序列的是一个以十六进制方式来表达的字符
	+ PHP 5.1.1 以前，\{$var} 中的反斜线还不会被显示出来。

3. Heredoc 结构 （相当于双引号）

    heredoc 句法结构：<<<。在该运算符之后要提供一个标识符，然后换行。接下来是字符串 string 本身，最后要用前面定义的标识符作为结束标志。结束时所引用的标识符必须在该行的第一列，而且，标识符的命名也要像其它标签一样遵守 PHP 的规则：**只能包含字母、数字和下划线，并且必须以字母和下划线作为开头**。

		<?php
			$str = <<<EOD
			Example of string
			spanning multiple lines
			using heredoc syntax.
			EOD;

	+ 要注意的是结束标识符这行除了可能有一个分号（;）外，绝对不能包含其它字符。